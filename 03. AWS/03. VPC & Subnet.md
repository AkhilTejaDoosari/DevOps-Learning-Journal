# AWS VPC & Subnets 

## Table of Contents
1. [Why We Need a Network Layer](#1-why-we-need-a-network-layer)  
2. [What Is a VPC?](#2-what-is-a-vpc)  
3. [CIDR and IP Address Ranges](#3-cidr-and-ip-address-ranges)  
4. [Subnets and Availability Zones](#4-subnets-and-availability-zones)  
5. [Routing, IGW & NAT Gateway](#5-routing-igw--nat-gateway)  
6. [Security Groups vs NACLs](#6-security-groups-vs-nacls)  
7. [IP Concepts â€“ Private, Public, Elastic, ENI](#7-ip-concepts--private-public-elastic-eni)  
8. [Networking Foundations (DNS, TCP, OSI)](#8-networking-foundations-dns-tcp-osi)  
9. [Architecture Blueprint (End-to-End VPC Design)](#9-architecture-blueprint-end-to-end-vpc-design)  

---

<details>
<summary><strong>1. Why We Need a Network Layer</strong></summary>

---

Before cloud days, every company ran its own physical racks â€” wires, routers, and firewalls forming a maze in a data center.
Applications lived there, connected through fixed cables. Everything was **tightly coupled** and **hard to expand**.

Then came AWS, giving the same control â€” but virtually.
Now, you donâ€™t buy switches or cables. You **design your own network** in software â€” thatâ€™s your **VPC (Virtual Private Cloud)**.
so you can decide:
- Who can enter your network  
- Which servers are public vs private  
- How data moves between them  

Without this layer, all AWS resources would float in one giant shared pool â€”
anyone could talk to anyone. No boundaries. No safety.
So AWS gives every architect a **private, fenced zone** inside the global cloud â€” a place where **you define who can enter, what can talk, and how data travels**.

---

### Analogy

Imagine AWS as a **planet**.  
Each region is a continent, and you carve out your own **private island** on it.  
On this island, you build homes (EC2), ports (gateways), and roads (route tables).  
You control who docks at your port and who stays inland â€” thatâ€™s your network layer in action.  

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          AWS  Region               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚       Your Private Island  â”‚   â”‚
â”‚   â”‚     (VPC 10.0.0.0/16)      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Why it matters

Every other AWS service â€” EC2, RDS, EFS, Lambda inside VPC â€” depends on this foundation.
Without a network layer, nothing knows *where* to live or *how* to communicate.

---

**Sticky recall:**

> *VPC is the island that gives shape, security, and direction to everything you deploy on the AWS planet.*

</details>

---

<details>
<summary><strong>2. What Is a VPC (Private Island Analogy)</strong></summary>

---

When you step into AWS, youâ€™re stepping onto a massive digital continent shared by millions of users.
A **Virtual Private Cloud (VPC)** is your own **walled territory** on that continent â€” an isolated area where you decide every rule:
which systems live there, how they talk, and whoâ€™s allowed to visit.

Inside this fenced zone, you build the backbone of your cloud world:

* **Subnets** â†’ districts within your territory.
* **Route Tables** â†’ roads deciding how traffic moves.
* **Internet Gateways and NAT Gateways** â†’ the ports connecting your island to the ocean (internet).
* **Security Groups and NACLs** â†’ the guards at every door and city gate.

AWS gives one **Default VPC** in each region, already wired for internet access.
But real architects rarely use defaults â€” they create **Custom VPCs** to design their own network map, CIDR ranges, and layered security.

---

### Analogy

Think of AWS as an **archipelago of islands** floating on a vast cloud ocean.
Your VPC is **one island you govern** â€”
you choose its borders, how big it is (CIDR), where the ports go, and what rules the coast guard enforces.
Every subnet you create is a town on that island, each with its own purpose â€” public towns face the sea, private ones stay inland.

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AWS Region â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                                                      â”‚
         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Your VPC (Private Island) â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚    â”‚     CIDR: 10.0.0.0/16                                         â”‚ â”‚
         â”‚    â”‚                                                               â”‚ â”‚
         â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚ â”‚
         â”‚    â”‚  â”‚ Public Town  â”‚   â”‚ Private Town â”‚                          â”‚ â”‚
         â”‚    â”‚  â”‚ (Subnet-A)   â”‚   â”‚ (Subnet-B)   â”‚                          â”‚ â”‚
         â”‚    â”‚  â”‚ 10.0.0.0/24  â”‚   â”‚ 10.0.1.0/24  â”‚                          â”‚ â”‚
         â”‚    â”‚  â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚ â”‚
         â”‚    â”‚        â”‚                  â”‚                                   â”‚ â”‚
         â”‚    â”‚   Internet Gateway     NAT Gateway                            â”‚ â”‚
         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                                                                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Key idea

A VPC is not just a boundary â€” itâ€™s **your virtual data center** inside AWS.
You control the topology, routes, ports, and guards.
Every subnet, EC2, or database you spin up takes shelter within this design.

---

**Sticky recall:**

> *VPC is your personal island â€” you own its land, ports, and laws. Everything else in AWS lives according to those rules.*

| Component | Purpose | Example |
|------------|----------|----------|
| **VPC** | Overall network boundary | `10.0.0.0/16` |
| **Subnet** | Sub-division of VPC | `10.0.1.0/24` |
| **Route Table** | Defines traffic paths | Routes to IGW/NAT |
| **IGW** | Internet gateway for public access | Web servers |
| **NAT Gateway** | Safe outbound Internet for private subnets | DB updates |
| **Security Group** | Instance-level firewall | Allow HTTP/SSH |
| **Network ACL** | Subnet-level firewall | Allow/Deny IPs |

ğŸ“¸ [Official AWS VPC Overview](https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html)

</details>

---
<details>
<summary><strong>3. CIDR and IP Address Ranges</strong></summary>

---

Every island has boundaries.
Before you build towns or houses, you first decide **how big your land is** and **how many addresses you can hand out**.
Thatâ€™s what **CIDR (Classless Inter-Domain Routing)** does â€” it defines the **size of your digital island**.

---

### 3.1 The idea behind CIDR

A CIDR block looks like `10.0.0.0/16`.
The first part (`10.0.0.0`) is your starting address,
and the number after the slash (`/16`) tells AWS how much of that address space youâ€™re reserving for the network itself.

The smaller the number, the **larger** the land you own.
Every step you add to the slash makes your island **smaller** and your available houses **fewer**.

You can picture it like carving land plots:

```
10.0.0.0/16  â†’  65,536 total addresses
10.0.1.0/24  â†’     256 total addresses
10.0.3.0/28  â†’      16 total addresses
```

Each block size comes from the same simple rule:

> **Total IPs = 2^(32 â€“ Subnet Mask)**

AWS keeps things practical â€” it only allows CIDRs between `/16` and `/28`,
and automatically holds back **5 IPs per subnet** for its own internal use.

---

### 3.2 A local picture â€” Florida & Delray Beach

Imagine **Florida** as your **VPC**.
The **561 area code** covers Palm Beach County â€” thatâ€™s your **main range** (`10.0.0.0/16`).
Inside it, **Delray Beach (33484)** is a **Subnet** (`10.0.1.0/24`).
Every **house address in Delray Beach** (like 33484-5237) becomes an **EC2 instance IP** (`10.0.1.5`).

```
VPC (10.0.0.0/16)  â†’  Florida (Area 561)
Subnet (10.0.1.0/24)  â†’  Delray Beach (33484)
EC2 (10.0.1.5)  â†’  A house in Delray Beach
```

Just as a city canâ€™t grow beyond Floridaâ€™s borders,
no subnet can exceed its parent VPCâ€™s range.
Thatâ€™s how AWS keeps every network organized, secure, and non-overlapping.

---

**Sticky recall:**

> *CIDR is the blueprint that decides how wide your island is and how many homes it can hold â€” the math behind every AWS neighborhood.*


Great â€” hereâ€™s a tight, reader-flow version that focuses on the **math** and exactly **how many IPs fit** in each block, aligned with your class notes.

---

<details>
<summary><strong> Math & Sizing (How many IPs fit?)</strong></summary>

---

You size your island with one rule:

**Total IPs = 2^(32 âˆ’ subnet mask)**
AWS lets you build between **/16** (largest) and **/28** (smallest).
Inside **every subnet**, AWS **reserves 5 IPs** (router, DNS, network ID, future use, broadcast), so **Usable = Total âˆ’ 5**.

---

### Quick Table (the sizes youâ€™ll actually use)

| CIDR    | Total IPs | Usable IPs (Total âˆ’ 5) | When to use it                                                          |
| ------- | --------- | ---------------------- | ----------------------------------------------------------------------- |
| **/16** | 65,536    | 65,531                 | Whole VPC range for large estates                                       |
| **/17** | 32,768    | 32,763                 | Big multi-AZ footprints                                                 |
| **/18** | 16,384    | 16,379                 | Growing envs with many subnets                                          |
| **/19** | 8,192     | 8,187                  | Medium envs                                                             |
| **/20** | 4,096     | 4,091                  | Common â€œlarge subnetâ€ size (matches your class example `172.31.0.0/20`) |
| **/21** | 2,048     | 2,043                  | App tiers with room to grow                                             |
| **/22** | 1,024     | 1,019                  | Busy subnets with services                                              |
| **/23** | 512       | 507                    | Moderate traffic tiers                                                  |
| **/24** | 256       | 251                    | Standard subnet size (very common)                                      |
| **/25** | 128       | 123                    | Smaller tiers / labs                                                    |
| **/26** | 64        | 59                     | Tight tiers, NAT/ALB subnets                                            |
| **/27** | 32        | 27                     | Tiny control planes                                                     |
| **/28** | 16        | 11                     | Minimum AWS size (tests, jump boxes)                                    |

> Below **/28** (i.e., **/29â€“/32**) is **not supported** for subnets in AWS (matches your class note).

---

### Worked Examples (like on your board)

* `10.0.0.0/16` â†’ 2^(32âˆ’16) = 2^16 = **65,536** total â†’ **65,531 usable**
* `10.0.1.0/24` â†’ 2^(32âˆ’24) = 2^8  = **256** total â†’ **251 usable**
* `172.31.0.0/20` â†’ 2^(32âˆ’20) = 2^12 = **4,096** total â†’ **4,091 usable**
* `10.0.3.0/28` â†’ 2^(32âˆ’28) = 2^4  = **16** total â†’ **11 usable**

Checks you wrote in class (for comparison):

* `/31` â†’ 2^(1) = **2** total (too small for AWS subnets)
* `/30` â†’ 2^(2) = **4** total (too small)
* `/29` â†’ 2^(3) = **8** total (too small)
* `/28` â†’ 2^(4) = **16** total (**minimum AWS size**)

---

### Visual: scaling down your land

```
/16 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ big estate (65,536)
/20 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ medium block (4,096)
/24 â”€â”€â”€â”€â”€â”€ neighborhood (256)
/28 â”€â”€ tiny plot (16)
```

---

**Sticky recall:**

> Start with **Total = 2^(32âˆ’mask)**, then subtract **5** per subnet. AWS allows **/16 â†’ /28**. `/24` is your everyday workhorse.

</details>

</details>

---

<details>
<summary><strong>4. Subnets and Availability Zones</strong></summary>

A **Subnet** is a smaller section inside a VPC, used to group resources by function or security level.  
Each Subnet resides in one **Availability Zone (AZ)**.

| Subnet Type | Connectivity | Common Use |
|--------------|--------------|------------|
| **Public** | Linked to Internet Gateway | Web servers, bastion hosts |
| **Private** | Linked to NAT Gateway | Databases, backend apps |

âœ… **Design Rule:** One public + one private subnet per AZ for fault tolerance.

```

VPC (10.0.0.0/16)
â”œâ”€ Public Subnet A (10.0.1.0/24)
â”œâ”€ Private Subnet A (10.0.2.0/24)
â”œâ”€ Public Subnet B (10.0.3.0/24)
â””â”€ Private Subnet B (10.0.4.0/24)

```

ğŸ§  **Analogy:**  
Subnets are districts inside your country â€” some open to tourists (public), some reserved for citizens (private).

ğŸ“¸ [VPC Subnet Basics](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html)

</details>

---

<details>
<summary><strong>5. ğŸš¦ Routing, IGW & NAT Gateway</strong></summary>

Each Subnet uses a **Route Table** to decide where packets travel.  

| Destination | Target | Purpose |
|--------------|---------|----------|
| `10.0.0.0/16` | `local` | Internal VPC traffic |
| `0.0.0.0/0` | `igw-xxxx` | Public Internet access |
| `0.0.0.0/0` | `nat-xxxx` | Private outbound Internet |

- **IGW (Internet Gateway)** â†’ doorway to the Internet.  
- **NAT Gateway** â†’ controlled exit only; outsiders canâ€™t enter.  

ğŸ§  **Analogy:**  
IGW is the main airport of your country (open both ways).  
NAT Gateway is a cargo terminal â€” ships goods out but blocks entry.

ğŸ“¸ [VPC Routing Concepts](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Route_Tables.html)

```

Public Subnet â†’ IGW â†’ Internet
Private Subnet â†’ NAT Gateway â†’ IGW â†’ Internet

```

</details>

---

<details>
<summary><strong>6. Security Groups vs NACLs</strong></summary>

### Security Groups (SG)
Instance-level firewalls. **Stateful** â€” return traffic is auto-allowed.

| Protocol | Port | Purpose |
|-----------|------|----------|
| SSH | 22 | Remote login |
| HTTP | 80 | Web traffic |
| HTTPS | 443 | Secure web traffic |

### Network ACL (NACL)
Subnet-level firewalls. **Stateless** â€” each direction checked separately.

| Feature | SG | NACL |
|----------|----|------|
| Level | Instance | Subnet |
| Stateful | âœ… Yes | âŒ No |
| Rules | Allow only | Allow + Deny |
| Default | Deny in / Allow out | Allow all |
| Use For | Per-instance security | Subnet boundary control |

ğŸ§  **Analogy:**  
SG = lock on each apartment door.  
NACL = guard at the gated community entrance.

ğŸ“¸ [VPC Security Groups Guide](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html)

</details>

---

<details>
<summary><strong>7. ğŸŒ IP Concepts â€“ Private, Public, Elastic, ENI</strong></summary>

## ğŸŒ IP Concepts â€“ Addresses on Your Island

Every EC2 instance inside your **VPC (Private Island)** needs a way to communicate â€” both **within the island** and **with the outside world**.  
Thatâ€™s where **IP addresses** come in.  

Each EC2 instance can have:
- **Private IP** â†’ used within your island (local communication)
- **Public IP** â†’ used to connect with the outside ocean (internet)
- **Elastic IP** â†’ a permanent public address (reserved port)
- **ENI (Elastic Network Interface)** â†’ the network card that holds these addresses

---

### ğŸ§© 1. Private IP â€“ The House Address Inside the Island

Whenever you build a house (launch an EC2 instance) on your island, AWS automatically assigns it a **Private IP address**.  

This address is used for **internal communication** â€”  
for example, your bakery (web server) talking to your storage warehouse (database) â€” all within your fenced island.  

A Private IP **stays the same** even if you restart the houseâ€™s power (stop/start the instance),  
but it is **released permanently** if you demolish the house (terminate the instance).  

Private IPs are **free of cost** and **not visible from the ocean (internet)** â€” they work only within your islandâ€™s local boundaries.

ğŸ“˜ **Example**
```

Instance A â†’ Private IP: 10.0.0.5
Instance B â†’ Private IP: 10.0.0.8

```

Both houses can exchange letters (data) freely because they live inside the same fenced island (VPC).

ğŸ’¡ **Analogy:**  
A **Private IP** is your **house address inside the island** â€” neighbors can visit you,  
but no ship sailing on the ocean can see or reach you.

ğŸ“¸ **Image:** [Private IP Addressing in EC2](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-ip-addressing.html)

---

### ğŸŒŠ 2. Public IP â€“ The Dock Facing the Ocean

When you build something on your island that the world should reach â€” like a tourist information center or a shop â€” you place it on the **coastline** (Public Subnet).  
AWS then assigns it a **Public IP address** connected to an **Internet Gateway (IGW)**.

This Public IP allows visitors (users on the internet) to find and access your service.

However, this dock address is **temporary (dynamic)** â€”  
if you close the port and reopen it (stop/start your instance), the city assigns a **new dock number** next time.  
If you shut down the port completely (terminate the instance), the old number is gone forever.

Public IPs are billed under AWSâ€™s **Public IPv4** pricing, but the **Free Tier** covers 750 hours per month.

ğŸ“˜ **Example**
```

Private IP: 10.0.0.12
Public IP: 3.120.55.23

````

Connect using SSH:
```bash
ssh -i mykey.pem ec2-user@3.120.55.23
````

After restarting, AWS might give you a new address, like `13.210.40.50`.

ğŸ’¡ **Analogy:**
A **Public IP** is your **temporary dock number** â€” ships (internet users) can reach you through it,
but if you rebuild or move your dock, the number changes.

ğŸ“¸ **Image:** [Public IPv4 Addressing in EC2](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-ip-addressing.html)

---

### âš“ 3. Elastic IP â€“ The Permanent Trade Port

Sometimes, you donâ€™t want your dock number (Public IP) to change â€” especially if you run a permanent business on your island, like a trading company (production server).
Thatâ€™s where an **Elastic IP (EIP)** comes in.

An Elastic IP is a **static (permanent) public IPv4 address** that you reserve manually.
It stays the same even if your instance stops, restarts, or moves.
You can **detach it** from one instance and **reassign it** to another anytime.

Elastic IPs are **free while attached**, but **billed if idle** (when allocated but unused).

ğŸ“˜ **Example**

```
Elastic IP: 18.220.45.90
Associated Instance: EC2-Web-Server
```

Even after restart:

```
Elastic IP: 18.220.45.90 âœ… (Permanent)
```

ğŸ’¡ **Analogy:**
An **Elastic IP** is your **islandâ€™s registered trade port** â€”
a permanent harbor number used for global trade.
Even if you rebuild your warehouse or relocate offices, ships (clients) always find you through the same port number.

ğŸ“¸ **Image:** [Elastic IP in EC2](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-ip-addressing.html)

---

### ğŸ›°ï¸ 4. ENI (Elastic Network Interface) â€“ The Islandâ€™s Communication Hub

An **ENI** is like the **communication control center** of each building on your island.
Itâ€™s a **virtual network card** that stores your Private IP, Public IP (if any), and connection rules (Security Groups).

You can **attach or detach** ENIs between instances, like swapping communication panels between buildings.
Theyâ€™re essential for fault-tolerant or multi-network designs.

ğŸ’¡ **Analogy:**
An **ENI** is the **telecom hub** in your building â€”
it manages all your phone lines, radios, and ports, connecting you to other buildings or even other islands.

ğŸ“¸ **Image:** [Elastic Network Interface (ENI)](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html)

---

### ğŸ§­ Comparison Summary

| IP Type        | Role on the Island      | Persistence         | Cost                             | Analogy                           |
| -------------- | ----------------------- | ------------------- | -------------------------------- | --------------------------------- |
| **Private IP** | Internal communication  | Persists on restart | Free                             | House address inside the island   |
| **Public IP**  | Internet-facing access  | Changes on restart  | Free (within 750 hrs/mo)         | Temporary dock number             |
| **Elastic IP** | Permanent global access | Fixed and reusable  | Free if attached; billed if idle | Registered trade port             |
| **ENI**        | Network connector       | N/A                 | Free                             | Communication hub in the building |

---

### ğŸ–¼ï¸ Visual Diagram

```
ğŸŒ AWS Planet
â”‚
â””â”€â”€ ğŸï¸ Your VPC (Private Island)
     â”‚
     â”œâ”€â”€ ğŸŒŠ Public Subnet (Coastal City)
     â”‚     â”œâ”€â”€ EC2 Instance with Public IP (Dock Access)
     â”‚     â””â”€â”€ EC2 Instance with Elastic IP (Permanent Port)
     â”‚
     â””â”€â”€ ğŸï¸ Private Subnet (Inland City)
           â”œâ”€â”€ EC2 Instance with Private IP (Internal Roads)
           â””â”€â”€ ENI (Communication Hub connecting everything)
```


                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       Internet User        â”‚
                    â”‚ (e.g., You on a Laptop)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                     Uses Public IP or Elastic IP
                                   â”‚
                      (Example: 3.120.55.23 or 18.220.45.90)
                                   â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   Internet Gateway (IGW)   â”‚
                     â”‚  Bridges Internet <-> VPC  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                           Public Subnet
                                   â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                                 â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  EC2 Instance â”‚                 â”‚  EC2 Instance â”‚
          â”‚   Web Server  â”‚                 â”‚   Database    â”‚
          â”‚               â”‚                 â”‚               â”‚
          â”‚ Public IP: 3.120.55.23          â”‚ No Public IP  â”‚
          â”‚ Elastic IP: 18.220.45.90 (opt)  â”‚ Private Only  â”‚
          â”‚ Private IP: 10.0.0.12           â”‚ Private IP: 10.0.0.8 â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                      Communicate privately via VPC
                                   â”‚
                         (10.0.0.12 â†” 10.0.0.8)

ğŸ“¸ **Reference:**
[AWS EC2 Networking â€“ IP Addressing](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-ip-addressing.html)

</details>

---

<details>
<summary><strong>8. ğŸ“¡ Networking Foundations (DNS, TCP, OSI)</strong></summary>

## Why do we need prerequisites before OSI?

Before the OSI model starts wrapping and sending data, two things usually happen first:  
1. We find the serverâ€™s **IP address**.  
2. We make sure thereâ€™s a **reliable connection**.

These two steps are like finding where the restaurant is and confirming the phone line works â€” only then can we start â€œtalking.â€

---

## A) Domain Name System (DNS)

*Analogy:* You know the **restaurantâ€™s name** (â€œgoogle.comâ€) but not its **street address**.  
DNS is the **telephone directory** that gives you the real address (the IP).

**Steps:**
1. Browser checks its local cache.  
2. If not found â†’ asks the **router** â†’ then your **ISPâ€™s DNS**.  
3. ISP may ask **Root** â†’ **TLD** (like `.com`) â†’ **Authoritative** DNS server.  
4. The authoritative server replies with the correct **IP address** (e.g., `142.250.xx.xx`).

ğŸ‘‰ Without DNS, weâ€™d have to memorize IPs instead of names â€” like remembering every restaurantâ€™s GPS coordinates.

---

## B) Transmission Control Protocol (TCP) â€“ 3-Way Handshake

*Analogy:* Starting a phone call:  
- You: â€œHello, can you hear me?â€  
- Server: â€œYes, I can.â€  
- You: â€œGreat, letâ€™s talk.â€

**Steps:**
1. **SYN (Synchronize)** â†’ Client: â€œI want to connect.â€  
2. **SYN-ACK (Synchronize + Acknowledge)** â†’ Server: â€œI hear you; Iâ€™m ready.â€  
3. **ACK (Acknowledge)** â†’ Client: â€œConfirmed, letâ€™s begin.â€

âœ… Now the connection is reliable.  
(When using **HTTPS**, a **TLS handshake** happens right after this to secure the communication.)

---

## C) OSI 7 Layers (Top â†’ Bottom)

---

### Layer 7 â€” Application

This is where the **user interacts** directly.  
Example: You type `https://www.google.com` â†’ your browser sends an **HTTP/HTTPS request** because **you asked for it**.

Common protocols:  
- **HTTP/HTTPS** â€“ web traffic  
- **FTP** â€“ file transfers  
- **SMTP/IMAP** â€“ emails

ğŸ‘‰ **Analogy:** Youâ€™re **writing the letter** you want to send.

---

### Layer 6 â€” Presentation

Handles **formatting, encryption, and compression** so the data looks correct and secure.  
Example: HTTPS encrypts your message before sending.

ğŸ‘‰ **Analogy:** You **seal the letter in an envelope and lock it**.

---

### Layer 5 â€” Session

Creates and maintains **sessions** between two systems.  
Example: You log in to **Instagram**, and for the next few minutes you donâ€™t need to log in again â€” the session is active.  
If you log out or it expires, the session closes.

ğŸ‘‰ **Analogy:** You **keep the call alive** until one side hangs up.

---

### Layer 4 â€” Transport

Breaks big data into **segments**, numbers them, and ensures everything arrives correctly.  
Two key protocols live here:

- **TCP** â†’ Reliable, ordered, connection-based (used by HTTPS).  
- **UDP** â†’ Faster, connectionless, no guarantee (used by video calls, games, DNS queries).

Example: Sending a **10 GB wedding video** â€” itâ€™s split into small numbered pieces that are reassembled on the other side.

ğŸ‘‰ **Analogy:** You **pack your gift into multiple numbered boxes** so none are lost.

---

### Layer 3 â€” Network

Adds **IP addresses** and decides how to reach the destination.  
Routers pick the **best path** to get data from your computer to the target server.

Example: Going from **Delhi â†’ Mumbai**, there are many roads; the router picks the fastest route.

ğŸ‘‰ **Analogy:** You **write sender and receiver addresses** on the package.

---

### Layer 2 â€” Data Link

Works inside your **local network (LAN, Wi-Fi, Ethernet)**.  
It converts **packets â†’ frames** and adds **MAC addresses** for local delivery.

Example: Your router knows which device to send data to â€” your phone or your laptop â€” using their unique MAC IDs.

ğŸ‘‰ **Analogy:** A **local delivery truck** takes your package to the right house on the same street.

---

### Layer 1 â€” Physical

Turns everything into **bits (0s and 1s)** and sends them as signals over **wires or air**.  
Examples: Fiber optics, copper cables, Wi-Fi signals.

ğŸ‘‰ **Analogy:** These are the **roads themselves** â€” the physical paths the trucks drive on.

---

## D) Encapsulation & Decapsulation

When you send data, it moves **down** through all layers (7 â†’ 1).  
When the receiver gets it, it moves **up** (1 â†’ 7).

```

Sender:   L7 â†’ L6 â†’ L5 â†’ L4 â†’ L3 â†’ L2 â†’ L1  (wrap the data)
Network:  --- bits travel through wires/Wi-Fi ---
Receiver: L1 â†’ L2 â†’ L3 â†’ L4 â†’ L5 â†’ L6 â†’ L7  (unwrap the data)

```

ğŸ’¡ **Analogy:**  
You wrap a gift in multiple boxes before shipping it.  
At the other end, the receiver opens each box layer by layer to reach the actual item.

---

âœ… **Key Takeaways:**
1. **DNS** finds where to send data.  
2. **TCP handshake** makes the connection reliable.  
3. **OSI layers** define how the message is wrapped, sent, and understood.  
4. Each layer adds its own â€œboxâ€ to keep communication smooth and universal.

ğŸ“¸ **Reference:** [AWS Networking Whitepaper](https://docs.aws.amazon.com/whitepapers/latest/aws-overview/networking.html)

ğŸ§  **Analogy:**  
Sending a gift â€” you wrap it (box = layers) and the receiver unwraps each to get the actual content.

ğŸ“¸ [AWS Networking Whitepaper](https://docs.aws.amazon.com/whitepapers/latest/aws-overview/networking.html)

</details>

---

<details>
<summary><strong>9. ğŸ—ºï¸ Architecture Blueprint (End-to-End VPC Design)</strong></summary>

### Two-Tier Web App Example

```

Region: us-east-1
VPC: 10.0.0.0/16
â”œâ”€ Public Subnet (10.0.1.0/24) â†’ EC2 Web Server + IGW
â””â”€ Private Subnet (10.0.2.0/24) â†’ RDS Database + NAT Gateway

```

**Traffic Flow**
1. User â†’ ALB â†’ Public EC2 (web)  
2. Web EC2 â†’ Private RDS (database)  
3. RDS â†’ Reply â†’ Web EC2 â†’ User  

ğŸ“¸ [VPC Public/Private Architecture Diagram](https://docs.aws.amazon.com/vpc/latest/userguide/images/nat-gateway-diagram.png)

ğŸ§  **Analogy:**  
Public district = city center where tourists enter.  
Private district = research zone with restricted access.

</details>

---

### ğŸ§© One-Line Takeaway
> **VPC defines your territory, Subnets organize it, Gateways connect it, and Security Groups guard it â€” the foundation of every AWS architecture.**