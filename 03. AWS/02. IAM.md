# 02 - IAM 

## AWS IAM (Identity & Access Management) Deep Dive

## 1. What is IAM?
- **Global AWS service** (not region-specific)
- Manages **users, groups, permissions**, and security policies
- **Root Account**:
  - Created automatically when AWS account is set up
  - **Only use for**: Initial setup (billing, security)
  - **Never use daily** or share credentials



## 2. Users & Groups

<img src="images/IAM.png" alt="IAM" width="600" height="150" /> 

### A. Users
- Represents a **person or service** (e.g., `Alice`, `Bob`)
- **Best Practice**:
  - One user = One person (no sharing)
  - Assign permissions via policies

### B. Groups
- **Purpose**: Organize users (e.g., `Developers`, `Operations`)
- **Rules**:
  - Groups **only contain users** (not other groups)
  - Users **can belong to multiple groups** (e.g., `Charles` in both `Developers` and `Audit Team`)
  - Users *don't need* to be in a group (but **not recommended**)

### C. Group-User Structure
| Group        | Users            | Notes                         |
|--------------|------------------|-------------------------------|
| Developers   | Alice, Bob, Charles | Developers need EC2 access   |
| Operations   | David, Edward     | Manages deployments           |
| Audit Team   | Charles, David    | Cross-team collaboration      |
| (No Group)   | Fred              | **Avoid this** - assign groups|

## 3. Permissions & Policies
### A. IAM Policies
- **JSON documents** defining permissions
- **Attached to**: Users, Groups, or Roles

### B. Example Policy
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "ec2:Describe*",       // Allows viewing EC2 instances
      "Resource": "*"                 // Applies to all resources
    },
    {
      "Effect": "Allow",
      "Action": "elasticloadbalancing:Describe*",           // View load balancers
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [                                        // CloudWatch permissions
        "cloudwatch:ListMetrics",
        "cloudwatch:GetMetricStatistics",
        "cloudwatch:Describe*"
      ],
      "Resource": "*"
    }
  ]
}
```
   - `Describe*` actions = read-only access
   - `Resource: "*"` = applies to all resources

### C. Key Concepts
- **Least Privilege Principle**: Grant only necessary permissions
- **Policy Structure**:
  - `Effect`: `Allow` or `Deny`
  - `Action`: Specific API calls (e.g., `ec2:Describe*`)
  - `Resource`: Which AWS resources apply (e.g., S3 bucket, EC2 instance).

## 4. Best Practices
1. **Never use root account** for daily tasks
2. **Use groups** to manage permissions at scale
3. **Regularly audit permissions** (remove unused access)
4. **Enable MFA** for all users
5. **Use IAM Roles** for AWS services

## Key Takeaways
âœ… **Root Account**: Only for emergencies  
âœ… **Users & Groups**: Organize by job function  
âœ… **Policies**: JSON rules for granular control  
ðŸš« **Avoid**: Over-permissive policies (`"Action": "*"`)
```