# **08. Package Management — Installing, Updating, and Managing Software**
> Mastering software installation and system updates across distributions.

---

## Table of Contents
- [1. Why Package Management Matters](#1-why-package-management-matters)
- [2. Understanding Package Managers](#2-understanding-package-managers)
- [3. APT: Debian and Ubuntu Systems](#3-apt-debian-and-ubuntu-systems)
- [4. DNF and YUM: Red Hat Family](#4-dnf-and-yum-red-hat-family)
- [5. Repositories Explained](#5-repositories-explained)
- [6. Searching for Packages](#6-searching-for-packages)
- [7. Installing Packages](#7-installing-packages)
- [8. Updating and Upgrading](#8-updating-and-upgrading)
- [9. Removing Packages](#9-removing-packages)
- [10. Cleaning Up](#10-cleaning-up)
- [11. Package Information and Dependencies](#11-package-information-and-dependencies)
- [12. Installing from Downloaded Files](#12-installing-from-downloaded-files)
- [13. Third-Party Repositories](#13-third-party-repositories)
- [14. Snap and Flatpak: Universal Packages](#14-snap-and-flatpak-universal-packages)
- [15. Building from Source](#15-building-from-source)
- [16. Real-World Scenarios](#16-real-world-scenarios)
- [17. Commands Reference](#17-commands-reference)
- [18. Quick Reference](#18-quick-reference)

---

<details>
<summary><strong>1. Why Package Management Matters</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

Every server needs software installed.

Whether it's:
- Web servers (nginx, apache)
- Databases (postgresql, mysql)
- Development tools (git, docker)
- Security patches and updates

Understanding package management means:
- you can install software reliably
- you can keep systems updated and secure
- you can troubleshoot installation issues
- you can manage dependencies automatically

This isn't about memorizing commands for different distros.
It's about understanding how Linux distributions package, distribute, and manage software.

</div>

</details>

---

<details>
<summary><strong>2. Understanding Package Managers</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-001 — What is a Package Manager?

A package manager handles:
- Installing software
- Updating software
- Removing software
- Managing dependencies
- Security updates

**Why Package Managers?**
Before package managers, you had to:
- Download source code
- Compile it yourself
- Manually resolve dependencies
- Track installed files manually

**Package managers solve this:**
- Pre-compiled binaries
- Automatic dependency resolution
- Centralized updates
- Easy removal (no leftover files)

---

### PKG-002 — Distribution Families

Different Linux distributions use different package managers.

**Debian/Ubuntu Family:**
- Package format: `.deb`
- Package manager: `apt` (high-level), `dpkg` (low-level)
- Examples: Ubuntu, Debian, Linux Mint, Pop!_OS

**Red Hat Family:**
- Package format: `.rpm`
- Package manager: `dnf` (modern), `yum` (older)
- Examples: RHEL, CentOS, Fedora, AlmaLinux, Rocky Linux

**Arch Family:**
- Package format: `.pkg.tar.zst`
- Package manager: `pacman`
- Examples: Arch Linux, Manjaro

**This file focuses on apt and dnf (most common in production).**

</div>

</details>

---

<details>
<summary><strong>3. APT: Debian and Ubuntu Systems</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-003 — APT Overview

**APT (Advanced Package Tool)** is the high-level package manager for Debian/Ubuntu.

**Key Commands:**
- `apt update` — refresh package list
- `apt upgrade` — install updates
- `apt install` — install package
- `apt remove` — remove package
- `apt search` — find packages
- `apt show` — package details

**APT vs APT-GET:**
- `apt` — modern, user-friendly (recommended)
- `apt-get` — older, script-friendly

For interactive use, use `apt`.

---

### PKG-004 — Updating Package Lists

**`apt update`** downloads the latest package lists from repositories.

```bash copy
sudo apt update
```

**What it does:**
- Contacts all configured repositories
- Downloads latest package lists
- Updates local cache

**When to run:**
- Before installing new packages
- Before upgrading
- After adding new repositories
- Regularly (daily/weekly)

**Important:** This doesn't install anything. It only refreshes the list of available packages.

---

### PKG-005 — Upgrading Packages

**`apt upgrade`** installs available updates for installed packages.

```bash copy
sudo apt upgrade
```

**What it does:**
- Installs newer versions of installed packages
- Won't remove packages or install new dependencies

**Interactive prompt:**
Shows what will be upgraded, asks for confirmation.

**Non-interactive (for scripts):**
```bash copy
sudo apt upgrade -y
```

**Full upgrade (handles dependencies):**
```bash copy
sudo apt full-upgrade
```

`full-upgrade` can install new packages or remove old ones to satisfy dependencies.

---

### PKG-006 — Installing Packages

**`apt install`** installs packages and their dependencies.

```bash copy
sudo apt install nginx
```

**Multiple packages:**
```bash copy
sudo apt install nginx postgresql git
```

**Specific version:**
```bash copy
sudo apt install nginx=1.18.0-0ubuntu1
```

**Dry run (see what would be installed):**
```bash copy
apt install --dry-run nginx
```

---

### PKG-007 — Removing Packages

**`apt remove`** removes package but keeps configuration files.

```bash copy
sudo apt remove nginx
```

**`apt purge`** removes package AND configuration files.

```bash copy
sudo apt purge nginx
```

**Remove with dependencies:**
```bash copy
sudo apt autoremove nginx
```

**When to use purge:**
- Completely removing software
- Cleaning up for fresh reinstall

**When to use remove:**
- Might reinstall later
- Want to keep custom configs

---

### PKG-008 — Searching for Packages

**`apt search`** finds packages by name or description.

```bash copy
apt search nginx
```

**Case-insensitive search:**
```bash copy
apt search --names-only nginx
```

**Show package details:**
```bash copy
apt show nginx
```

**List installed packages:**
```bash copy
apt list --installed
```

**List upgradable packages:**
```bash copy
apt list --upgradable
```

</div>

</details>

---

<details>
<summary><strong>4. DNF and YUM: Red Hat Family</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-009 — DNF Overview

**DNF (Dandified YUM)** is the modern package manager for RHEL/Fedora.

**Key Commands:**
- `dnf check-update` — check for updates
- `dnf upgrade` — install updates
- `dnf install` — install package
- `dnf remove` — remove package
- `dnf search` — find packages
- `dnf info` — package details

**DNF vs YUM:**
- `dnf` — modern, faster, better dependency resolution
- `yum` — older, still works (often symlinked to dnf)

On modern systems, `yum` commands redirect to `dnf`.

---

### PKG-010 — Updating with DNF

**Check for updates:**
```bash copy
sudo dnf check-update
```

**Install updates:**
```bash copy
sudo dnf upgrade
```

**Update specific package:**
```bash copy
sudo dnf upgrade nginx
```

**Non-interactive:**
```bash copy
sudo dnf upgrade -y
```

---

### PKG-011 — Installing with DNF

**Install package:**
```bash copy
sudo dnf install nginx
```

**Multiple packages:**
```bash copy
sudo dnf install nginx postgresql git
```

**Reinstall package:**
```bash copy
sudo dnf reinstall nginx
```

**Install from specific repo:**
```bash copy
sudo dnf install nginx --enablerepo=epel
```

---

### PKG-012 — Removing with DNF

**Remove package:**
```bash copy
sudo dnf remove nginx
```

**Remove with dependencies:**
```bash copy
sudo dnf autoremove nginx
```

---

### PKG-013 — Searching with DNF

**Search packages:**
```bash copy
dnf search nginx
```

**Package info:**
```bash copy
dnf info nginx
```

**List installed:**
```bash copy
dnf list installed
```

**List available:**
```bash copy
dnf list available
```

</div>

</details>

---

<details>
<summary><strong>5. Repositories Explained</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-014 — What are Repositories?

**Repositories (repos)** are servers that host packages.

**Think of it like an app store:**
- Centralized package storage
- Verified, tested packages
- Easy updates
- Security patches

**Official Repositories:**
Maintained by distribution (Ubuntu, Red Hat, etc.).
- Stable
- Tested
- Supported

**Third-Party Repositories:**
Maintained by community or vendors.
- Newer versions
- Additional software
- May be less stable

---

### PKG-015 — Repository Configuration

**Debian/Ubuntu:**
Repository lists stored in:
- `/etc/apt/sources.list` — main list
- `/etc/apt/sources.list.d/` — additional repo files

**Viewing repositories:**
```bash copy
cat /etc/apt/sources.list
ls /etc/apt/sources.list.d/
```

**Red Hat/Fedora:**
Repository configs stored in:
- `/etc/yum.repos.d/`

**Viewing repositories:**
```bash copy
dnf repolist
ls /etc/yum.repos.d/
```

---

### PKG-016 — Adding Repositories

**Ubuntu - Adding PPA:**
```bash copy
sudo add-apt-repository ppa:ondrej/php
sudo apt update
```

**RHEL/Fedora - Enabling EPEL:**
```bash copy
sudo dnf install epel-release
sudo dnf update
```

**Manual repo addition (Ubuntu):**
```bash copy
echo "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list
sudo apt update
```

</div>

</details>

---

<details>
<summary><strong>6. Searching for Packages</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-017 — Finding Packages

**APT:**
```bash copy
apt search nginx
apt show nginx
apt list --installed | grep nginx
```

**DNF:**
```bash copy
dnf search nginx
dnf info nginx
dnf list installed | grep nginx
```

**Finding which package provides a file:**

**APT:**
```bash copy
apt-file search /usr/bin/vim
# Or
dpkg -S /usr/bin/vim
```

**DNF:**
```bash copy
dnf provides /usr/bin/vim
```

</div>

</details>

---

<details>
<summary><strong>7. Installing Packages</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-018 — Installation Best Practices

**Always update first:**
```bash copy
# APT
sudo apt update
sudo apt install nginx

# DNF
sudo dnf check-update
sudo dnf install nginx
```

**Why update first?**
Ensures you get the latest version available.

**Installing multiple packages:**
```bash copy
sudo apt install nginx postgresql redis git docker.io
```

**Confirming installation:**
```bash copy
which nginx
nginx -v
```

</div>

</details>

---

<details>
<summary><strong>8. Updating and Upgrading</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-019 — Regular Updates

**Best Practice:**
Update systems regularly (weekly or monthly).

**Full update process (APT):**
```bash copy
sudo apt update
sudo apt upgrade -y
sudo apt autoremove -y
sudo apt autoclean
```

**Full update process (DNF):**
```bash copy
sudo dnf check-update
sudo dnf upgrade -y
sudo dnf autoremove -y
sudo dnf clean all
```

**Automating updates:**

**Ubuntu (unattended-upgrades):**
```bash copy
sudo apt install unattended-upgrades
sudo dpkg-reconfigure unattended-upgrades
```

**RHEL/Fedora (dnf-automatic):**
```bash copy
sudo dnf install dnf-automatic
sudo systemctl enable --now dnf-automatic.timer
```

---

### PKG-020 — Distribution Upgrades

**Ubuntu (upgrade to next release):**
```bash copy
sudo apt update
sudo apt upgrade
sudo do-release-upgrade
```

**Fedora (upgrade to next version):**
```bash copy
sudo dnf upgrade --refresh
sudo dnf install dnf-plugin-system-upgrade
sudo dnf system-upgrade download --releasever=39
sudo dnf system-upgrade reboot
```

**Important:** Always backup before major upgrades.

</div>

</details>

---

<details>
<summary><strong>9. Removing Packages</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-021 — Clean Removal

**APT - Remove vs Purge:**

**Remove (keep configs):**
```bash copy
sudo apt remove nginx
```

**Purge (remove everything):**
```bash copy
sudo apt purge nginx
```

**Remove with unused dependencies:**
```bash copy
sudo apt autoremove nginx
```

**DNF - Removal:**
```bash copy
sudo dnf remove nginx
sudo dnf autoremove
```

</div>

</details>

---

<details>
<summary><strong>10. Cleaning Up</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-022 — Disk Space Management

Package managers cache downloaded packages. Over time, this consumes disk space.

**APT - Cleaning:**

**Remove downloaded package files:**
```bash copy
sudo apt clean
```

**Remove old/unused package files:**
```bash copy
sudo apt autoclean
```

**Remove unused dependencies:**
```bash copy
sudo apt autoremove
```

**DNF - Cleaning:**

**Remove cached packages:**
```bash copy
sudo dnf clean packages
```

**Remove all cache:**
```bash copy
sudo dnf clean all
```

**Remove unused dependencies:**
```bash copy
sudo dnf autoremove
```

**Checking cache size:**

**APT:**
```bash copy
du -sh /var/cache/apt/archives
```

**DNF:**
```bash copy
du -sh /var/cache/dnf
```

</div>

</details>

---

<details>
<summary><strong>11. Package Information and Dependencies</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-023 — Package Details

**APT:**
```bash copy
apt show nginx
apt-cache depends nginx    # dependencies
apt-cache rdepends nginx   # reverse dependencies
```

**DNF:**
```bash copy
dnf info nginx
dnf repoquery --requires nginx
dnf repoquery --whatrequires nginx
```

---

### PKG-024 — Installed Package Info

**APT - List files from package:**
```bash copy
dpkg -L nginx
```

**APT - Which package owns file:**
```bash copy
dpkg -S /usr/sbin/nginx
```

**DNF - List files from package:**
```bash copy
rpm -ql nginx
```

**DNF - Which package owns file:**
```bash copy
rpm -qf /usr/sbin/nginx
```

</div>

</details>

---

<details>
<summary><strong>12. Installing from Downloaded Files</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-025 — Manual Package Installation

Sometimes you download `.deb` or `.rpm` files directly.

**Debian/Ubuntu (.deb files):**
```bash copy
sudo dpkg -i package.deb
sudo apt install -f    # fix dependencies
```

**Modern APT method:**
```bash copy
sudo apt install ./package.deb
```

**Red Hat/Fedora (.rpm files):**
```bash copy
sudo rpm -i package.rpm
```

**Modern DNF method:**
```bash copy
sudo dnf install ./package.rpm
```

**Why use apt/dnf instead of dpkg/rpm?**
They automatically resolve and install dependencies.

</div>

</details>

---

<details>
<summary><strong>13. Third-Party Repositories</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-026 — Adding Third-Party Repos

**Example: Docker on Ubuntu**

```bash copy
# Add GPG key
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# Add repository
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list

# Update and install
sudo apt update
sudo apt install docker-ce
```

**Example: EPEL on RHEL/CentOS**

```bash copy
sudo dnf install epel-release
sudo dnf update
```

**Security Note:**
Only add repositories from trusted sources.

</div>

</details>

---

<details>
<summary><strong>14. Snap and Flatpak: Universal Packages</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-027 — Snap

**Snap** packages work across distributions.

**Installation:**
```bash copy
sudo apt install snapd    # Ubuntu/Debian
sudo dnf install snapd    # Fedora
```

**Using Snap:**
```bash copy
snap find vlc              # search
sudo snap install vlc      # install
snap list                  # list installed
sudo snap refresh          # update all
sudo snap remove vlc       # remove
```

---

### PKG-028 — Flatpak

**Flatpak** is another universal package format.

**Installation:**
```bash copy
sudo apt install flatpak
```

**Add Flathub repository:**
```bash copy
flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo
```

**Using Flatpak:**
```bash copy
flatpak search vlc
flatpak install flathub org.videolan.VLC
flatpak list
flatpak update
flatpak uninstall org.videolan.VLC
```

**When to use Snap/Flatpak:**
- Software not in official repos
- Need latest version
- Distribution-agnostic deployment

</div>

</details>

---

<details>
<summary><strong>15. Building from Source</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### PKG-029 — Compiling from Source

Sometimes software isn't packaged. You compile from source.

**Typical Process:**
```bash copy
# Download source
wget https://example.com/software-1.0.tar.gz
tar -xzf software-1.0.tar.gz
cd software-1.0

# Install build dependencies
sudo apt install build-essential    # Ubuntu
sudo dnf groupinstall "Development Tools"    # Fedora

# Configure, compile, install
./configure
make
sudo make install
```

**Installation prefix:**
```bash copy
./configure --prefix=/usr/local
make
sudo make install
```

**Cleaning up:**
```bash copy
sudo make uninstall    # if supported
# OR manually remove files from /usr/local
```

**When to compile from source:**
- Need specific version not in repos
- Need custom compile flags
- Contributing to development

**Downsides:**
- No automatic updates
- Manual dependency management
- Harder to remove cleanly

</div>

</details>

---

<details>
<summary><strong>16. Real-World Scenarios</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### Scenario 1: Installing Web Server

**Symptom:**
Need to install nginx on Ubuntu server.

**Cause:**
Fresh server, no web server installed.

**Fix:**
```bash copy
sudo apt update
sudo apt install nginx
sudo systemctl start nginx
sudo systemctl enable nginx
```

**Confirm:**
```bash copy
systemctl status nginx
curl localhost
# Should see nginx welcome page
```

---

### Scenario 2: Package Not Found

**Symptom:**
`apt install something` says "Unable to locate package".

**Cause:**
Package lists not updated, or package not in repos.

**Fix:**
```bash copy
# Update package lists
sudo apt update

# Try again
sudo apt install something

# If still not found, search
apt search something

# Or check if it's in a PPA
```

**Confirm:**
Package installs successfully.

---

### Scenario 3: Broken Dependencies

**Symptom:**
Installation fails with "unmet dependencies" error.

**Cause:**
Dependency conflict or corrupted package database.

**Fix:**
```bash copy
# APT
sudo apt update
sudo apt install -f    # fix broken dependencies
sudo dpkg --configure -a    # configure unconfigured packages

# DNF
sudo dnf check
sudo dnf distro-sync
```

**Confirm:**
```bash copy
sudo apt upgrade    # should work without errors
```

---

### Scenario 4: Disk Full from Package Cache

**Symptom:**
Disk full, `/var/cache` consuming space.

**Cause:**
Package manager cache accumulated over time.

**Fix:**
```bash copy
# Check cache size
du -sh /var/cache/apt/archives    # APT
du -sh /var/cache/dnf             # DNF

# Clean cache
sudo apt clean
sudo apt autoclean
sudo apt autoremove

# OR for DNF
sudo dnf clean all
sudo dnf autoremove
```

**Confirm:**
```bash copy
df -h    # disk usage back to normal
```

---

### Scenario 5: Need Specific Package Version

**Symptom:**
Need older version for compatibility.

**Cause:**
Latest version has breaking changes.

**Fix:**
```bash copy
# List available versions
apt-cache madison nginx

# Install specific version
sudo apt install nginx=1.18.0-0ubuntu1

# Hold package to prevent updates
sudo apt-mark hold nginx
```

**Confirm:**
```bash copy
apt-mark showhold
# Output: nginx
```

**Remove hold:**
```bash copy
sudo apt-mark unhold nginx
```

---

### Scenario 6: Adding Docker Repository

**Symptom:**
Need to install Docker from official repo.

**Cause:**
Distribution's Docker version too old.

**Fix:**
```bash copy
# Remove old versions
sudo apt remove docker docker-engine docker.io containerd runc

# Install prerequisites
sudo apt update
sudo apt install ca-certificates curl gnupg

# Add Docker's GPG key
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg

# Add repository
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# Install Docker
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io
```

**Confirm:**
```bash copy
sudo docker run hello-world
```

</div>

</details>

---

<details>
<summary><strong>17. Commands Reference</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

**APT (Debian/Ubuntu):**

```bash copy
sudo apt update   # refresh package lists
```

```bash copy
sudo apt upgrade   # install updates
```

```bash copy
sudo apt full-upgrade   # upgrade with dependency changes
```

```bash copy
sudo apt install package   # install package
```

```bash copy
sudo apt install package1 package2   # install multiple
```

```bash copy
sudo apt remove package   # remove package (keep config)
```

```bash copy
sudo apt purge package   # remove package and config
```

```bash copy
sudo apt autoremove   # remove unused dependencies
```

```bash copy
sudo apt clean   # remove downloaded package files
```

```bash copy
sudo apt autoclean   # remove old package files
```

```bash copy
apt search keyword   # search for packages
```

```bash copy
apt show package   # show package details
```

```bash copy
apt list --installed   # list installed packages
```

```bash copy
apt list --upgradable   # list packages with updates
```

```bash copy
dpkg -L package   # list files from package
```

```bash copy
dpkg -S /path/to/file   # which package owns file
```

```bash copy
sudo dpkg -i package.deb   # install .deb file
```

```bash copy
sudo apt install ./package.deb   # install .deb with dependencies
```

**DNF/YUM (RHEL/Fedora):**

```bash copy
sudo dnf check-update   # check for updates
```

```bash copy
sudo dnf upgrade   # install updates
```

```bash copy
sudo dnf install package   # install package
```

```bash copy
sudo dnf install package1 package2   # install multiple
```

```bash copy
sudo dnf remove package   # remove package
```

```bash copy
sudo dnf autoremove   # remove unused dependencies
```

```bash copy
sudo dnf clean all   # remove all cache
```

```bash copy
dnf search keyword   # search for packages
```

```bash copy
dnf info package   # show package details
```

```bash copy
dnf list installed   # list installed packages
```

```bash copy
dnf list available   # list available packages
```

```bash copy
dnf repolist   # list enabled repositories
```

```bash copy
rpm -ql package   # list files from package
```

```bash copy
rpm -qf /path/to/file   # which package owns file
```

```bash copy
sudo rpm -i package.rpm   # install .rpm file
```

```bash copy
sudo dnf install ./package.rpm   # install .rpm with dependencies
```

**Snap:**

```bash copy
snap find package   # search for snap packages
```

```bash copy
sudo snap install package   # install snap package
```

```bash copy
snap list   # list installed snaps
```

```bash copy
sudo snap refresh   # update all snaps
```

```bash copy
sudo snap remove package   # remove snap package
```

**Flatpak:**

```bash copy
flatpak search package   # search for flatpak packages
```

```bash copy
flatpak install flathub package   # install flatpak
```

```bash copy
flatpak list   # list installed flatpaks
```

```bash copy
flatpak update   # update all flatpaks
```

```bash copy
flatpak uninstall package   # remove flatpak
```

</div>

</details>

---

<details>
<summary><strong>18. Quick Reference</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

**Key Concepts:**
- Package managers automate software installation, updates, and removal
- Always run update before installing (refresh package lists)
- APT for Debian/Ubuntu, DNF for RHEL/Fedora
- Repositories are centralized package servers
- `remove` keeps configs, `purge` deletes everything
- Regular updates are critical for security
- Clean package cache periodically to save disk space
- Third-party repos offer newer software but may be less stable

**Distribution Package Managers:**

| Distribution | Package Format | High-Level Tool | Low-Level Tool |
|--------------|----------------|-----------------|----------------|
| Debian/Ubuntu | `.deb` | `apt` | `dpkg` |
| RHEL/CentOS/Fedora | `.rpm` | `dnf` / `yum` | `rpm` |
| Arch Linux | `.pkg.tar.zst` | `pacman` | - |

**Common Package Manager Tasks:**

| Task | APT (Ubuntu/Debian) | DNF (RHEL/Fedora) |
|------|---------------------|-------------------|
| Update package lists | `sudo apt update` | `sudo dnf check-update` |
| Install updates | `sudo apt upgrade` | `sudo dnf upgrade` |
| Install package | `sudo apt install pkg` | `sudo dnf install pkg` |
| Remove package | `sudo apt remove pkg` | `sudo dnf remove pkg` |
| Remove completely | `sudo apt purge pkg` | `sudo dnf remove pkg` |
| Search packages | `apt search keyword` | `dnf search keyword` |
| Show package info | `apt show pkg` | `dnf info pkg` |
| List installed | `apt list --installed` | `dnf list installed` |
| Clean cache | `sudo apt clean` | `sudo dnf clean all` |
| Remove unused deps | `sudo apt autoremove` | `sudo dnf autoremove` |

**APT Update Flow:**

```
1. sudo apt update          → Refresh package lists from repos
2. sudo apt upgrade         → Install available updates
3. sudo apt autoremove      → Remove unused dependencies
4. sudo apt autoclean       → Remove old cached packages
```

**DNF Update Flow:**

```
1. sudo dnf check-update    → Check for available updates
2. sudo dnf upgrade         → Install available updates
3. sudo dnf autoremove      → Remove unused dependencies
4. sudo dnf clean all       → Remove cached packages
```

**Package Installation Best Practice:**

```bash
# Always update first
sudo apt update             # or: sudo dnf check-update

# Then install
sudo apt install package    # or: sudo dnf install package

# Verify installation
which package
package --version
```

**Remove vs Purge (APT):**

| Command | Effect |
|---------|--------|
| `apt remove` | Removes package, keeps config files |
| `apt purge` | Removes package AND config files |
| `apt autoremove` | Removes unused dependencies |

**Repository Configuration Files:**

| Distribution | Location |
|--------------|----------|
| Ubuntu/Debian | `/etc/apt/sources.list` and `/etc/apt/sources.list.d/` |
| RHEL/Fedora | `/etc/yum.repos.d/` |

**Package File Formats:**

| Format | Used By | Install Command |
|--------|---------|-----------------|
| `.deb` | Debian/Ubuntu | `sudo apt install ./file.deb` |
| `.rpm` | RHEL/Fedora | `sudo dnf install ./file.rpm` |
| `.snap` | Universal | `sudo snap install package` |
| `.flatpak` | Universal | `flatpak install package` |

**Finding Package Information:**

| What You Need | APT | DNF |
|---------------|-----|-----|
| Package description | `apt show pkg` | `dnf info pkg` |
| Files in package | `dpkg -L pkg` | `rpm -ql pkg` |
| Package owning file | `dpkg -S /path` | `rpm -qf /path` |
| Dependencies | `apt-cache depends pkg` | `dnf repoquery --requires pkg` |
| Reverse dependencies | `apt-cache rdepends pkg` | `dnf repoquery --whatrequires pkg` |

**Common Installation Patterns:**

```bash
# Web server
sudo apt install nginx                # or: sudo dnf install nginx

# Database
sudo apt install postgresql           # or: sudo dnf install postgresql

# Development tools
sudo apt install build-essential git  # or: sudo dnf groupinstall "Development Tools"

# Docker
# (requires adding third-party repository first)

# Python
sudo apt install python3 python3-pip  # or: sudo dnf install python3 python3-pip
```

**Troubleshooting Commands:**

| Problem | APT Solution | DNF Solution |
|---------|--------------|--------------|
| Broken dependencies | `sudo apt install -f` | `sudo dnf check` |
| Corrupted database | `sudo dpkg --configure -a` | `sudo dnf distro-sync` |
| Package not found | `sudo apt update` then retry | `sudo dnf check-update` then retry |
| Disk full (cache) | `sudo apt clean` | `sudo dnf clean all` |

**Security Update Best Practices:**

1. **Regular updates:** Weekly or monthly
2. **Automated updates:** Consider `unattended-upgrades` (Ubuntu) or `dnf-automatic` (RHEL)
3. **Test in staging:** Before production
4. **Monitor for breaks:** After updates
5. **Backup first:** Always have rollback plan

**What's Next:**
Now that you understand package management, the next file covers text processing — searching, filtering, and manipulating text with grep, sed, awk, and more.

</div>

</details>

---