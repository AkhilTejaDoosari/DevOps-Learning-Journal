# **04. File Operations — Creating, Managing, and Processing Files**
> Mastering file manipulation from creation to deletion.

---

## Table of Contents
- [1. Why File Operations Matter](#1-why-file-operations-matter)
- [2. Creating and Inspecting Files](#2-creating-and-inspecting-files)
- [3. Copying Files and Directories](#3-copying-files-and-directories)
- [4. Moving and Renaming](#4-moving-and-renaming)
- [5. Deleting Files Safely](#5-deleting-files-safely)
- [6. Viewing File Contents](#6-viewing-file-contents)
- [7. Previewing File Sections](#7-previewing-file-sections)
- [8. Paging Through Large Files](#8-paging-through-large-files)
- [9. Wildcard Patterns and Globbing](#9-wildcard-patterns-and-globbing)
- [10. Redirection: Complete Guide](#10-redirection-complete-guide)
- [11. Pipes and Command Chaining](#11-pipes-and-command-chaining)
- [12. Links: Hard vs Symbolic](#12-links-hard-vs-symbolic)
- [13. Text Editors Brief Intro](#13-text-editors-brief-intro)
- [14. Real-World Scenarios](#14-real-world-scenarios)
- [15. Commands Reference](#15-commands-reference)
- [16. Quick Reference](#16-quick-reference)

---

<details>
<summary><strong>1. Why File Operations Matter</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

Every DevOps task involves file manipulation.

Deploying code? You're copying files.
Managing configs? You're editing and moving files.
Debugging issues? You're reading log files.
Backing up data? You're archiving files.

Understanding file operations means:
- you can automate deployments confidently
- you can process logs efficiently
- you can manage configs safely
- you can troubleshoot file issues quickly

This isn't about memorizing commands.
It's about understanding how files are created, moved, viewed, and deleted — and how to chain operations together.

</div>

</details>

---

<details>
<summary><strong>2. Creating and Inspecting Files</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-001 — Creating Files

**`touch`:**
Creates an empty file if it doesn't exist, or updates its timestamps if it does.

```bash copy
touch file1.txt
```

**Use Cases:**
- Create empty file as placeholder
- Update modification time
- Test file permissions

**Creating Files with Content:**
```bash copy
echo "Hello World" > file.txt
```

---

### FOP-002 — Identifying File Types

**`file`:**
Examines contents and reports type (text, executable, image, etc.).

```bash copy
file file1.txt
# Output: file1.txt: ASCII text
```

**Why This Matters:**
Some files look like text but aren't. `file` tells you the truth.

```bash copy
file /bin/ls
# Output: /bin/ls: ELF 64-bit LSB executable
```

---

### FOP-003 — Inspecting File Metadata

**`stat`:**
Shows detailed metadata: size, permissions, and timestamps.

```bash copy
stat file1.txt
```

**Output Includes:**
- File size
- Inode number
- Permissions
- Access time (atime)
- Modification time (mtime)
- Change time (ctime)

**Why This Matters:**
Debugging file issues often requires knowing when a file was last modified or accessed.

</div>

</details>

---

<details>
<summary><strong>3. Copying Files and Directories</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-004 — cp (Copy)

Duplicates files or directories.

**Basic:**
```bash copy
cp source.txt destination.txt
```

**Interactive (`-i`):**
Prompts before overwrite.
```bash copy
cp -i file1.txt file2.txt
```

**Verbose (`-v`):**
Prints each copy action.
```bash copy
cp -v file1.txt backup/
# Output: 'file1.txt' -> 'backup/file1.txt'
```

**Recursive (`-r`):**
Copies directories and all contents.
```bash copy
cp -r src/ backup/
```

**Combined (`-rv`):**
Recursive with verbose output.
```bash copy
cp -rv src/ backup/
```

**Best Practice:**
Use `cp -iv` for safety (interactive + verbose).

</div>

</details>

---

<details>
<summary><strong>4. Moving and Renaming</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-005 — mv (Move/Rename)

Moves or renames files while preserving metadata.

**Rename:**
```bash copy
mv oldname.txt newname.txt
```

**Move:**
```bash copy
mv file.txt /home/akhil/documents/
```

**Interactive (`-i`):**
```bash copy
mv -i file1.txt file2.txt
```

**Verbose (`-v`):**
```bash copy
mv -v file.txt backup/
```

**Why Use `mv` Instead of `cp` + `rm`?**
`mv` preserves file metadata (timestamps, permissions) and is faster.

</div>

</details>

---

<details>
<summary><strong>5. Deleting Files Safely</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-006 — rm (Remove)

Deletes files (no trash bin — permanent deletion).

**Basic:**
```bash copy
rm file.txt
```

**Interactive (`-i`):**
Prompts before each deletion.
```bash copy
rm -i file.txt
```

**Recursive (`-r`):**
Removes directory trees and contents.
```bash copy
rm -r directory/
```

**Force (`-f`):**
Ignores nonexistent files and suppresses prompts.
```bash copy
rm -f file.txt
```

**Dangerous Combination:**
```bash copy
rm -rf directory/
```
**Use with extreme caution!** This force-deletes everything without confirmation.

**Safer Alternative:**
```bash copy
rm -riv directory/
# Interactive + verbose for safety
```

</div>

</details>

---

<details>
<summary><strong>6. Viewing File Contents</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-007 — cat (Concatenate)

Prints entire file to stdout.

```bash copy
cat file1.txt
```

**Number Lines:**
```bash copy
cat -n file1.txt
```

**`tac`:**
Prints file in reverse order.
```bash copy
tac file1.txt
```

**`nl` (Number Lines):**
Alternative line numbering.
```bash copy
nl file1.txt
```

**When to Use:**
- `cat` — small files, quick view
- `less` — large files, need scrolling
- `head`/`tail` — first/last lines only

</div>

</details>

---

<details>
<summary><strong>7. Previewing File Sections</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-008 — head (First Lines)

Shows first 10 lines by default.

```bash copy
head file.txt
```

**First N lines:**
```bash copy
head -n 20 file.txt
```

---

### FOP-009 — tail (Last Lines)

Shows last 10 lines by default.

```bash copy
tail file.txt
```

**Last N lines:**
```bash copy
tail -n 20 file.txt
```

**Follow Mode (`-f`):**
Watches file for new lines (perfect for logs).
```bash copy
tail -f /var/log/nginx/access.log
```

**Press Ctrl+C to exit.**

</div>

</details>

---

<details>
<summary><strong>8. Paging Through Large Files</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-010 — less vs more

**`more`:**
Paginates forward only (legacy tool).
```bash copy
more long.txt
```

**`less`:**
Allows forward/backward navigation (preferred).
```bash copy
less journal.txt
```

**Navigation in `less`:**
- `Space` — next page
- `b` — previous page
- `/pattern` — search forward
- `?pattern` — search backward
- `q` — quit

**Why `less` is Better:**
- Backward navigation
- Search capability
- Faster on large files
- Doesn't load entire file into memory

</div>

</details>

---

<details>
<summary><strong>9. Wildcard Patterns and Globbing</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-011 — Globbing Explained

Globbing lets you match multiple files with patterns.

**`*` (Asterisk):**
Matches zero or more characters.

```bash copy
ls *.txt           # all .txt files
rm temp*           # all files starting with "temp"
cp *.log backup/   # all .log files to backup/
```

**`?` (Question Mark):**
Matches exactly one character.

```bash copy
ls file?.txt       # file1.txt, file2.txt, fileA.txt
rm test?.log       # test1.log, test2.log, but not test10.log
```

**`[]` (Brackets):**
Matches any one character inside brackets.

```bash copy
ls file[123].txt   # file1.txt, file2.txt, file3.txt
rm log[A-Z].txt    # logA.txt, logB.txt, etc.
```

**Combining Patterns:**
```bash copy
ls file[0-9]*.txt  # file1.txt, file123.txt, file9backup.txt
```

**Negation:**
```bash copy
ls file[!0-9].txt  # files NOT ending with a digit before .txt
```

</div>

</details>

---

<details>
<summary><strong>10. Redirection: Complete Guide</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-012 — Standard Streams

Redirection controls where command output goes.

**Standard Streams:**
- **stdin (0)** — standard input
- **stdout (1)** — standard output
- **stderr (2)** — standard error

---

### FOP-013 — Output Redirection

**`>` (Redirect stdout, Overwrite):**
```bash copy
ls -l > files.txt
# Saves ls output to files.txt (overwrites existing)
```

**`>>` (Redirect stdout, Append):**
```bash copy
echo "New entry" >> log.txt
# Adds to end of log.txt
```

**`2>` (Redirect stderr):**
```bash copy
command 2> errors.txt
# Saves error messages to errors.txt
```

**`2>&1` (Redirect stderr to stdout):**
```bash copy
command > output.txt 2>&1
# Saves both stdout and stderr to output.txt
```

**`&>` (Shortcut for both):**
```bash copy
command &> all_output.txt
# Same as above, shorter syntax
```

**Discarding Output:**
```bash copy
command > /dev/null 2>&1
# Silences all output
```

**Common Pattern:**
```bash copy
./deploy.sh > deploy.log 2>&1
# Captures all output for later review
```

---

### FOP-014 — Input Redirection

**`<` (Redirect stdin):**
```bash copy
wc -l < file.txt
# Feeds file.txt as input to wc
```

**Practical Example:**
```bash copy
sort < unsorted.txt > sorted.txt
# Reads unsorted.txt, sorts it, writes to sorted.txt
```

</div>

</details>

---

<details>
<summary><strong>11. Pipes and Command Chaining</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-015 — Pipes

**Pipe (`|`):**
Connects stdout of one command to stdin of another.

**Basic Example:**
```bash copy
cat file.txt | grep "error"
# Searches for "error" in file.txt
```

**Chaining Multiple Commands:**
```bash copy
cat access.log | grep "404" | wc -l
# Counts 404 errors in log
```

**Common Patterns:**

**Sorting:**
```bash copy
ls -l | sort -k5 -n
# Sort files by size (column 5)
```

**Filtering:**
```bash copy
ps aux | grep nginx
# Find nginx processes
```

**Counting:**
```bash copy
ls | wc -l
# Count files in directory
```

**Combining with Redirection:**
```bash copy
cat file.txt | grep "error" > errors.txt
# Filter and save
```

**Real DevOps Use:**
```bash copy
docker ps | grep "running" | wc -l
# Count running containers
```

</div>

</details>

---

<details>
<summary><strong>12. Links: Hard vs Symbolic</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-016 — Hard Links

**Hard Link:**
Points to the same inode (actual file data on disk).

```bash copy
ln original.txt hardlink.txt
```

**Properties:**
- Same inode number
- Deleting original doesn't break link
- Can't link across filesystems
- Can't link directories

**Checking:**
```bash copy
ls -li
# Shows inode numbers — hard links share the same inode
```

---

### FOP-017 — Symbolic (Soft) Links

**Symbolic Link:**
Points to the filename, not the inode.

```bash copy
ln -s original.txt symlink.txt
```

**Properties:**
- Different inode number
- Deleting original breaks link
- Can link across filesystems
- Can link directories

**Visual:**
```bash copy
ls -l symlink.txt
# Output: lrwxrwxrwx ... symlink.txt -> original.txt
```

**When to Use:**
- **Hard link:** Backup important files (data preserved even if original deleted)
- **Soft link:** Shortcuts, cross-filesystem links, directory links

**Example:**
```bash copy
# Create soft link to logs directory
ln -s /var/log/nginx ~/logs
# Now ~/logs points to /var/log/nginx
```

---

### FOP-018 — File Type Indicators

When you run `ls -l`, the first character tells you the file type:

| Indicator | Type           | Description                |
|-----------|----------------|----------------------------|
| `-`       | Regular file   | Text or binary file        |
| `d`       | Directory      | Folder                     |
| `l`       | Symbolic link  | Pointer to another file    |
| `b`       | Block device   | Storage device             |
| `c`       | Character device | Terminal, printer        |
| `p`       | Named pipe     | FIFO for IPC               |
| `s`       | Socket         | Network communication      |

**Example:**
```bash copy
ls -l
# Output:
# drwxr-xr-x  2 akhil akhil 4096 Jan 15 10:00 documents
# -rw-r--r--  1 akhil akhil  123 Jan 15 10:01 file.txt
# lrwxrwxrwx  1 akhil akhil    9 Jan 15 10:02 link -> file.txt
```

</div>

</details>

---

<details>
<summary><strong>13. Text Editors Brief Intro</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### FOP-019 — nano (Beginner-Friendly)

```bash copy
nano file.txt
```

**Controls:**
- `Ctrl+O` — save
- `Ctrl+X` — exit
- `Ctrl+K` — cut line
- `Ctrl+U` — paste

---

### FOP-020 — vi/vim (Advanced)

```bash copy
vi file.txt
```

**Basic Commands:**
- `i` — insert mode
- `Esc` — command mode
- `:w` — save
- `:q` — quit
- `:wq` — save and quit
- `:q!` — quit without saving

**When to Use:**
- **nano** — quick edits, beginner-friendly
- **vim** — powerful editing, worth learning for speed

</div>

</details>

---

<details>
<summary><strong>14. Real-World Scenarios</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

### Scenario 1: Backup Config Files Before Editing

**Symptom:**
Need to edit `/etc/nginx/nginx.conf` but want backup.

**Cause:**
Changes might break config.

**Fix:**
```bash copy
sudo cp -iv /etc/nginx/nginx.conf /etc/nginx/nginx.conf.backup
sudo nano /etc/nginx/nginx.conf
```

**Confirm:**
```bash copy
ls -l /etc/nginx/*.conf*
# Output shows both files
```

---

### Scenario 2: Process All Log Files in Directory

**Symptom:**
Need to count "ERROR" in all `.log` files.

**Cause:**
Too many files to check manually.

**Fix:**
```bash copy
grep -c "ERROR" *.log
# OR save results:
grep -c "ERROR" *.log > error_counts.txt
```

**Confirm:**
```bash copy
cat error_counts.txt
# Output: filename:count for each log
```

---

### Scenario 3: Monitor Log File in Real-Time

**Symptom:**
Deployment running, need to watch application log.

**Cause:**
Need to see errors as they happen.

**Fix:**
```bash copy
tail -f /var/log/app/application.log
```

**Confirm:**
New log entries appear in real-time.
Press `Ctrl+C` to stop.

---

### Scenario 4: Copy Multiple Files Matching Pattern

**Symptom:**
Need to copy all `.conf` files to backup directory.

**Cause:**
Too many to copy individually.

**Fix:**
```bash copy
mkdir -p backup
cp -v *.conf backup/
```

**Confirm:**
```bash copy
ls backup/
# Output: all .conf files copied
```

---

### Scenario 5: Symbolic Link Broken After Move

**Symptom:**
Symlink shows red in `ls` output, doesn't work.

**Cause:**
Original file was moved or deleted.

**Fix:**
```bash copy
ls -l symlink
# Check where it points
rm symlink
ln -s /new/location/original.txt symlink
```

**Confirm:**
```bash copy
ls -l symlink
# Output: symlink -> /new/location/original.txt (works)
```

---

### Scenario 6: Capture Both Output and Errors

**Symptom:**
Script fails but error messages not captured.

**Cause:**
Only capturing stdout, not stderr.

**Fix:**
```bash copy
./deploy.sh > deploy.log 2>&1
# OR
./deploy.sh &> deploy.log
```

**Confirm:**
```bash copy
cat deploy.log
# Output: contains both stdout and stderr
```

</div>

</details>

---

<details>
<summary><strong>15. Commands Reference</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

```bash copy
touch file.txt   # create empty file or update timestamp
```

```bash copy
file filename   # identify file type
```

```bash copy
stat filename   # show detailed file metadata
```

```bash copy
cp source.txt dest.txt   # copy file
```

```bash copy
cp -i source.txt dest.txt   # copy with prompt before overwrite
```

```bash copy
cp -v source.txt dest.txt   # copy with verbose output
```

```bash copy
cp -r src/ dest/   # copy directory recursively
```

```bash copy
cp -riv src/ dest/   # copy directory with interactive + verbose
```

```bash copy
mv old.txt new.txt   # rename file
```

```bash copy
mv file.txt /path/to/destination/   # move file
```

```bash copy
mv -iv source dest   # move with interactive + verbose
```

```bash copy
rm file.txt   # delete file
```

```bash copy
rm -i file.txt   # delete with confirmation prompt
```

```bash copy
rm -r directory/   # delete directory and contents
```

```bash copy
rm -rf directory/   # force delete without prompts (dangerous!)
```

```bash copy
cat file.txt   # print entire file
```

```bash copy
cat -n file.txt   # print with line numbers
```

```bash copy
tac file.txt   # print in reverse order
```

```bash copy
nl file.txt   # number lines
```

```bash copy
head file.txt   # show first 10 lines
```

```bash copy
head -n 20 file.txt   # show first 20 lines
```

```bash copy
tail file.txt   # show last 10 lines
```

```bash copy
tail -n 20 file.txt   # show last 20 lines
```

```bash copy
tail -f logfile.log   # follow log file in real-time
```

```bash copy
less file.txt   # page through file with navigation
```

```bash copy
ls *.txt   # list all .txt files
```

```bash copy
rm temp*   # delete all files starting with "temp"
```

```bash copy
cp *.log backup/   # copy all .log files to backup/
```

```bash copy
ls file?.txt   # match file1.txt, file2.txt, etc.
```

```bash copy
ls file[0-9].txt   # match file0.txt through file9.txt
```

```bash copy
command > output.txt   # redirect stdout to file (overwrite)
```

```bash copy
command >> output.txt   # redirect stdout to file (append)
```

```bash copy
command 2> errors.txt   # redirect stderr to file
```

```bash copy
command &> all.txt   # redirect both stdout and stderr
```

```bash copy
command > /dev/null 2>&1   # discard all output
```

```bash copy
cat file.txt | grep "error"   # pipe to grep
```

```bash copy
cat file.txt | grep "error" | wc -l   # chain multiple pipes
```

```bash copy
ln original.txt hardlink.txt   # create hard link
```

```bash copy
ln -s original.txt symlink.txt   # create symbolic link
```

```bash copy
nano file.txt   # edit file with nano
```

```bash copy
vi file.txt   # edit file with vi/vim
```

</div>

</details>

---

<details>
<summary><strong>16. Quick Reference</strong></summary>

<div style="margin-left: 16px; margin-right: 16px; margin-top: 8px; margin-bottom: 8px;">

**Key Concepts:**
- `touch` creates files, `mkdir` creates directories
- `cp` copies, `mv` moves/renames, `rm` deletes (permanent!)
- `cat` shows entire file, `less` pages through, `head`/`tail` show sections
- Globbing: `*` matches many chars, `?` matches one, `[]` matches set
- Redirection: `>` overwrites, `>>` appends, `2>` captures errors
- Pipes (`|`) chain commands together
- Hard links share inode, soft links point to filename
- Always use `-i` for interactive prompts on destructive operations

**Globbing Patterns:**

| Pattern | Matches | Example |
|---------|---------|---------|
| `*` | Zero or more characters | `*.txt` matches all .txt files |
| `?` | Exactly one character | `file?.txt` matches file1.txt, fileA.txt |
| `[]` | Any character in set | `file[123].txt` matches file1.txt, file2.txt, file3.txt |
| `[!]` | Any character NOT in set | `file[!0-9].txt` matches fileA.txt but not file1.txt |

**Redirection Reference:**

| Operator | Purpose | Example |
|----------|---------|---------|
| `>` | Redirect stdout (overwrite) | `ls > files.txt` |
| `>>` | Redirect stdout (append) | `echo "log" >> file.txt` |
| `<` | Redirect stdin | `wc -l < file.txt` |
| `2>` | Redirect stderr | `command 2> errors.txt` |
| `2>&1` | Redirect stderr to stdout | `command > all.txt 2>&1` |
| `&>` | Redirect both (shortcut) | `command &> all.txt` |
| `> /dev/null 2>&1` | Discard all output | `command > /dev/null 2>&1` |

**File Type Indicators (from ls -l):**

| Indicator | Type | Description |
|-----------|------|-------------|
| `-` | Regular file | Text or binary file |
| `d` | Directory | Folder |
| `l` | Symbolic link | Pointer to another file |
| `b` | Block device | Storage device |
| `c` | Character device | Terminal, printer |
| `p` | Named pipe | FIFO for IPC |
| `s` | Socket | Network communication |

**Hard Link vs Symbolic Link:**

| Feature | Hard Link | Symbolic Link |
|---------|-----------|---------------|
| Points to | Same inode | File path |
| Survives target deletion | Yes | No (becomes broken) |
| Cross-filesystem | No | Yes |
| Link directories | No | Yes |
| Command | `ln source target` | `ln -s source target` |

**Common File Operations:**

| Task | Command |
|------|---------|
| Create empty file | `touch file.txt` |
| Copy file | `cp source.txt dest.txt` |
| Copy directory | `cp -r src/ dest/` |
| Move/rename | `mv old.txt new.txt` |
| Delete file | `rm file.txt` |
| Delete directory | `rm -r dir/` |
| View file | `cat file.txt` |
| Page through file | `less file.txt` |
| First 10 lines | `head file.txt` |
| Last 10 lines | `tail file.txt` |
| Follow log | `tail -f log.txt` |

**What's Next:**
Now that you can create and manage files, the next file covers users and groups — managing who can access the system and what they're part of.

</div>

</details>

---